<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"/><meta name="theme-color" content="#222"/><meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1"/><meta name="renderer" content="webkit"/><link rel="icon" type="image/ico" sizes="32x32" href="/assets/favicon.ico"/><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"/><link rel="alternate" href="/rss.xml" title="何必要叹气呢？" type="application/rss+xml"><link rel="alternate" href="/atom.xml" title="何必要叹气呢？" type="application/atom+xml"><link rel="alternate" type="application/json" title="何必要叹气呢？" href="https://www.htired.top/feed.json"/><link rel="preconnect" href="https://s4.zstatic.net"/><link rel="preconnect" href="https://at.alicdn.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mulish:400,400italic,700,700italic%7CFredericka%20the%20Great:400,400italic,700,700italic%7CNoto%20Serif%20JP:400,400italic,700,700italic%7CNoto%20Serif%20SC:400,400italic,700,700italic%7CInconsolata:400,400italic,700,700italic&display=swap&subset=latin,latin-ext" media="none" onload="this.media&#x3D;&#39;all&#39;"><link rel="stylesheet" href="/css/app.css?v=0.4.11"><link rel="modulepreload" href="/js/chunk-6AROBX2M.js"></link><link rel="modulepreload" href="/js/chunk-CDFWGKAZ.js"></link><link rel="modulepreload" href="/js/chunk-NGTPZFEZ.js"></link><link rel="modulepreload" href="/js/chunk-T5KHDXD7.js"></link><link rel="modulepreload" href="/js/chunk-UCNSAKJE.js"></link><link rel="modulepreload" href="/js/chunk-WIQECBEN.js"></link><link rel="modulepreload" href="/js/comments-YMZC2DEK.js"></link><link rel="modulepreload" href="/js/copy-tex-5ZQCB5LC.js"></link><link rel="modulepreload" href="/js/index.esm-UQTDDMFT.js"></link><link rel="modulepreload" href="/js/post-GXBO3POO.js"></link><link rel="modulepreload" href="/js/quicklink-Q3LCUN34.js"></link><link rel="modulepreload" href="/js/search-HYBAVWN7.js"></link><link rel="modulepreload" href="/js/siteInit.js"></link><link rel="modulepreload" href="/js/waline-2AUA5EA7.js"></link><link rel="stylesheet" href="/css/comments-SJZAII77.css" media="none" onload="this.media&#x3D;&#39;all&#39;"></link><link rel="stylesheet" href="/css/siteInit.css" media="none" onload="this.media&#x3D;&#39;all&#39;"></link><link rel="stylesheet" href="/css/waline-ZFRMIHOE.css" media="none" onload="this.media&#x3D;&#39;all&#39;"></link><link rel="preload" href="https://github.com/htired/MyPic/blob/main/img/t1.png?raw=true" as="image" fetchpriority="high"><link rel="preload" href="https://github.com/htired/MyPic/blob/main/img/81d1da7e1ba142629967fea196c73e0e.jpg?raw=true" as="image" fetchpriority="high"><link rel="preload" href="https://raw.githubusercontent.com/htired/MyPic/main/img/1b87e2c5880511ebb6edd017c2d2eca2.png" as="image" fetchpriority="high"><link rel="preload" href="https://github.com/htired/MyPic/blob/main/img/4fc551ee880a11ebb6edd017c2d2eca2.jpg?raw=true" as="image" fetchpriority="high"><link rel="preload" href="https://github.com/htired/MyPic/blob/main/img/a47a423f9d1c42f8895c53c72f27ff87.jpg?raw=true" as="image" fetchpriority="high"><link rel="preload" href="https://github.com/htired/MyPic/blob/main/img/6c1bc1deb312449195a8c6a802e916c1.jpg?raw=true" as="image" fetchpriority="high"><meta name="description" content="送君南浦，伤如之何？"/><link rel="canonical" href="https://www.htired.top/2024/07/26/algorithm/c/"><title></title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline"></h1><div class="meta"><span class="item" title="创建时间：2024-07-26 19:34:29"><span class="icon"><i class="ic i-calendar"></i></span><span class="text">发表于</span><time itemprop="dateCreated datePublished" datetime="2024-07-26T19:34:29+08:00">2024-07-26</time></span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i></span><span class="text">本文字数</span><span>45k</span><span class="text">字</span></span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i></span><span class="text">阅读时长</span><span>40 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span><span class="line"></span><span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Htired Love</a></li></ul><ul class="right" id="rightNav"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div class="pjax" id="imgs"><ul><li class="item" style="background-image: url(&quot;https://github.com/htired/MyPic/blob/main/img/t1.png?raw=true&quot;);"></li><li class="item" style="background-image: url(&quot;https://github.com/htired/MyPic/blob/main/img/81d1da7e1ba142629967fea196c73e0e.jpg?raw=true&quot;);"></li><li class="item" style="background-image: url(&quot;https://raw.githubusercontent.com/htired/MyPic/main/img/1b87e2c5880511ebb6edd017c2d2eca2.png&quot;);"></li><li class="item" style="background-image: url(&quot;https://github.com/htired/MyPic/blob/main/img/4fc551ee880a11ebb6edd017c2d2eca2.jpg?raw=true&quot;);"></li><li class="item" style="background-image: url(&quot;https://github.com/htired/MyPic/blob/main/img/a47a423f9d1c42f8895c53c72f27ff87.jpg?raw=true&quot;);"></li><li class="item" style="background-image: url(&quot;https://github.com/htired/MyPic/blob/main/img/6c1bc1deb312449195a8c6a802e916c1.jpg?raw=true&quot;);"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"></use><use xlink:href="#gentle-wave" x="48" y="3"></use><use xlink:href="#gentle-wave" x="48" y="5"></use><use xlink:href="#gentle-wave" x="48" y="7"></use></g></svg></div><main><div class="inner"><div class="pjax" id="main"><div class="article wrap"><div class="breadcrumb" itemListElement itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i><span><a href="/">首页</a></span></div><article class="post block" itemscope="itemscope" itemtype="http://schema.org/Article" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.htired.top/2024/07/26/algorithm/c/"/><span hidden="hidden" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="image" content="/assets/avatar.jpg"/><meta itemprop="name" content="htired"/><meta itemprop="description" content="路还很长，这不是最终的结果, 送君南浦，伤如之何？"/></span><span hidden="hidden" itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="何必要叹气呢？"/></span><div class="body md" itemprop="articleBody"><h1 id="字符型数据"><a class="anchor" href="#字符型数据">#</a> 字符型数据</h1>
<hr />
<table>
<thead>
<tr>
<th>类型</th>
<th>字节数</th>
<th>取值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>signed char</td>
<td>1</td>
<td>-128 ~ 127</td>
</tr>
<tr>
<td>unsigned char</td>
<td>1</td>
<td>0 ~ 255</td>
</tr>
</tbody>
</table>
<p>注意：</p>
<ul>
<li><code>c99</code>  把字符型数据作为整型类型的一种。</li>
<li>在使用<strong>有符号</strong>字符型变量时，允许储存的值为负数，但是字符的代码不可能是负值，所以在存储字符时只用到了 0-127 这一部分。</li>
</ul>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
int main()
&#123;
    signed char sc;
    unsigned char uc;
    //在 vc++ 中,char类型的变量是 signed char 类型的，在其他的编译器中 char 类型的变量可能是 unsigned char 类型的
    char ch;
    printf(&quot;%d, %d, %d\n&quot;, sizeof(sc), sizeof(uc), sizeof(ch));

    uc = -1;
    ch = -1;
    printf(&quot;%d, %d\n&quot;, ch, uc); // -1, 255
    /*
        由于 %d 是 int 类型，相当于
        int w;
        printf(&quot;%d, %d\n&quot;, w = ch, w = uc);
    */
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p>由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 是  <code>int</code>  类型的数据，占 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 个字节，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>32</mn></mrow><annotation encoding="application/x-tex">32</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">32</span></span></span></span> 个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span></p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 对应的补码：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><munder><mrow><mn>11</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>24</mn></munder><mtext> </mtext><munder><munder><mrow><mn>1</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>8</mn></munder></mrow><annotation encoding="application/x-tex">\underbrace{11\cdots1}_{24}\,\underbrace{1\cdots1}_{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.9435em;vertical-align:-1.2991em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">11</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span></span></span></span></li>
</ul>
<p>对于  <code>unsigned char uc = -1; int w = uc</code></p>
<ul>
<li>
<p>将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 赋值给 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 时候，由于  <code>char</code>  只占一个字节，且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 为  <code>int</code>  类型</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 对应的补码：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><munder><mrow><mn>1</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>8</mn></munder></mrow><annotation encoding="application/x-tex">\underbrace{1\cdots1}_{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.9435em;vertical-align:-1.2991em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span></span></span></span>，舍弃其余高的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>24</mn></mrow><annotation encoding="application/x-tex">24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">24</span></span></span></span> 位</p>
</li>
<li>
<p>将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 赋值给 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 时候，将  <code>unsigned char</code>  转化为  <code>int</code>  类型的数据</p>
<p>首先 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mtext> </mtext><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">8\,bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span> 全部复制到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 的低 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mtext> </mtext><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">8\,bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span> 上。</p>
<p>由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 是无有符号的  <code>char</code>  类型数据，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 的高 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>24</mn></mrow><annotation encoding="application/x-tex">24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">24</span></span></span></span> 位的二进制上全部填写 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>:</mo><munder><munder><mrow><mn>0</mn><mo>⋯</mo><mn>0</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>24</mn></munder><mtext> </mtext><munder><munder><mrow><mn>1</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>8</mn></munder></mrow><annotation encoding="application/x-tex">w:\underbrace{0\cdots0}_{24}\,\underbrace{1\cdots1}_{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.9435em;vertical-align:-1.2991em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span></span></span></span></p>
<p>由于采用补码存储，最终转换为原码输出：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>=</mo><mn>255</mn></mrow><annotation encoding="application/x-tex">w = 255</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">255</span></span></span></span></p>
</li>
</ul>
<p>对于  <code>char ch = -1; int w = ch</code></p>
<ul>
<li>
<p>将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 赋值给 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">ch</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span></span></span></span> 时候，由于  <code>char</code>  只占一个字节，且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span> 为  <code>int</code>  类型</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mi>c</mi></mrow><annotation encoding="application/x-tex">uc</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span><span class="mord mathnormal">c</span></span></span></span> 对应的补码：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munder><munder><mrow><mn>1</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>8</mn></munder></mrow><annotation encoding="application/x-tex">\underbrace{1\cdots1}_{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.9435em;vertical-align:-1.2991em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span></span></span></span>，舍弃其余高的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>24</mn></mrow><annotation encoding="application/x-tex">24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">24</span></span></span></span> 位</p>
</li>
<li>
<p>将 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">ch</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span></span></span></span> 赋值给 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 时候，将  <code>char</code>  转化为  <code>int</code>  类型的数据</p>
<p>首先 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">ch</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mtext> </mtext><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">8\,bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span> 全部复制到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 的低 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mtext> </mtext><mi>b</mi><mi>i</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">8\,bit</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">bi</span><span class="mord mathnormal">t</span></span></span></span> 上。</p>
<p>由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi></mrow><annotation encoding="application/x-tex">ch</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span></span></span></span> 是有符号的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>h</mi><mi>a</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">char</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">c</span><span class="mord mathnormal">ha</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span></span></span></span> 类型数据，并且最高位为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，那么 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span></span></span></span> 的高 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>24</mn></mrow><annotation encoding="application/x-tex">24</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">24</span></span></span></span> 位的二进制上全部填写 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>:</mo><munder><munder><mrow><mn>11</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>24</mn></munder><mtext> </mtext><munder><munder><mrow><mn>1</mn><mo>⋯</mo><mn>1</mn></mrow><mo stretchy="true">⏟</mo></munder><mn>8</mn></munder></mrow><annotation encoding="application/x-tex">w:\underbrace{11\cdots1}_{24}\,\underbrace{1\cdots1}_{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.9435em;vertical-align:-1.2991em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">11</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span style="top:-1.7009em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord munder"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6444em;"><span class="svg-align" style="top:-2.352em;"><span class="pstrut" style="height:3em;"></span><span class="stretchy" style="height:0.548em;min-width:1.6em;"><span class="brace-left" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMinYMin slice"><path d="M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z"/></svg></span><span class="brace-center" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMidYMin slice"><path d="M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z"/></svg></span><span class="brace-right" style="height:0.548em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.548em" viewBox="0 0 400000 548" preserveAspectRatio="xMaxYMin slice"><path d="M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z"/></svg></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.648em;"><span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2991em;"><span></span></span></span></span></span></span></span></span></p>
<p>由于采用补码存储，最终转换为原码输出：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">w = -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></p>
</li>
</ul>
<h1 id="数组"><a class="anchor" href="#数组">#</a> 数组</h1>
<h2 id="数组作为函数参数"><a class="anchor" href="#数组作为函数参数">#</a> 数组作为函数参数</h2>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
//1. 形参是数组的形式，传入的是首元素的地址
//  - 地址是应该使用指针来接收
//    所以 arr[] 这里看似是数组，本质是指针变量
//	  其实z arr[] = *p
void bubbleSort(int arr[])
&#123;
    //这里 arr 是指针变量，在 64 位中大小为 8 bit
    for (int i = 0; i &lt; n; i++) &#123;
        for (int j = 0; j &lt; n - i; j++) &#123;
            if (arr[j] &lt; arr[j - 1]) &#123;
                int t = arr[j];
                arr[j] = arr[j - 1];
                arr[j - 1] = t;
            &#125;
        &#125;
    &#125;
&#125;
int main()
&#123;
    int arr[10] = &#123;9, 8, 7, 6, 5, 4, 3, 2, 1, 0&#125;;
    //数组名本质是：数组首元素的地址
    bubbleSort(arr);
    for (int i = 0; i &lt; n; i++) &#123;
        cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;;
    &#125;
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<p>上述的解决方式</p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">//1. 形参是数组的形式，传入的是首元素的地址</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//  - 地址是应该使用指针来接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">//    所以 arr 这里看似是数组，本质是指针变量</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">void</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 这里 arr 是指针变量，在 64 位中大小为 8 字节</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>                <span class="token keyword">int</span> t <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 数组名本质是：数组首元素的地址</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">bubbleSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="数组名"><a class="anchor" href="#数组名">#</a> 数组名</h2>
<h3 id="一维数组的数组名"><a class="anchor" href="#一维数组的数组名">#</a> 一维数组的数组名</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 000000000061FDF0</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 000000000061FDF0</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">// 既然说 arr 为数组首元素地址</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">//  为什么 sizeof (arr) 为 40? 而不是 4 或者 8</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>数组名确实能表示首元素地址，但是有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个例外</p>
<ol>
<li>
<p><code>sizeof(数组名)</code> ，这里的数组名<strong>表示整个数组</strong>，计算的是整个数组的大小，单位是字节</p>
</li>
<li>
<p><code>&amp;数组名</code> ，这里的数组名表示整个数组，取出的是<strong>整个数组的地址</strong></p>
<blockquote>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
   int arr[10] = &#123;9, 8, 7, 6, 5, 4, 3, 2, 1, 0&#125;;
   printf(&quot;%p\n&quot;, arr);         // 00D5F940
   printf(&quot;%p\n&quot;, arr + 1);     // 00D5F944

   printf(&quot;%p\n&quot;, &amp;arr[0]);     // 00D5F940
   printf(&quot;%p\n&quot;, &amp;arr[0] + 1); // 00D5F944

   printf(&quot;%p\n&quot;, &amp;arr);        // 00D5F940
   printf(&quot;%p\n&quot;, &amp;arr + 1);    // 00D5F968

   system(&quot;pause&quot;);
   return 0;
&#125;
</code></pre>
</blockquote>
<p>可以发现， <code>&amp;数组名 + 1</code>  为数组增长了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mi>x</mi><mn>2</mn><msub><mn>8</mn><mn>16</mn></msub><mo>=</mo><mn>2</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>1</mn></msup><mo>+</mo><mn>8</mn><mo>×</mo><mn>1</mn><msup><mn>6</mn><mn>0</mn></msup><mo>=</mo><mn>40</mn></mrow><annotation encoding="application/x-tex">0x28_{16} = 2\times 16^1 + 8\times 16^0 = 40</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7944em;vertical-align:-0.15em;"></span><span class="mord">0</span><span class="mord mathnormal">x</span><span class="mord">2</span><span class="mord"><span class="mord">8</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">6</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">40</span></span></span></span>。</p>
<p>即为数组的大小</p>
</li>
</ol>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 1. 形参是指针的形式，传入的是首元素的地址</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">//   - 地址是应该使用指针来接收</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">void</span> <span class="token function">bubbleSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 这里 arr 是指针变量，在 64 位中大小为 8 字节</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>            <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>                <span class="token keyword">int</span> t <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>                arr<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>            <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 数组名本质是：数组首元素的地址</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token function">bubbleSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="30"></td><td><pre>        cout <span class="token operator">&lt;&lt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<h3 id="二维数组的数组名"><a class="anchor" href="#二维数组的数组名">#</a> 二维数组的数组名</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 48</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    arr<span class="token punctuation">;</span> <span class="token comment">// 二维数组的数组名也表示数组首元素的地址</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">//arr 表示是的第一行的地址（一维数组的地址）</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">//arr + 1 表示是的第二行的地址（一维数组的地址）</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// 000000000061FDE0</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 000000000061FDF0，比上述增长了 16 个字节</span></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 行数 = 总数组大小 / 第一行数组大小</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">int</span> rs <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 48 / 16;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"行数：%d\n"</span><span class="token punctuation">,</span> rs<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token comment">// 列数 = 第一行数组大小 / 第一个数组元素大小</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">int</span> cs <span class="token operator">=</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16 / 4;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"列数：%d\n"</span><span class="token punctuation">,</span> cs<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>类似的，若  <code>arr</code>  是二维数组，那么  <code>&amp;arr</code>  就是整个二维数组的地址</p>
<h1 id="指针"><a class="anchor" href="#指针">#</a> 指针</h1>
<h2 id="指针-2"><a class="anchor" href="#指针-2">#</a> 指针</h2>
<p>指针就是内存中一个<strong>最小</strong>单元的编号，也就是<strong>地址</strong>。</p>
<blockquote>
<p>通常指的是指针变量，用来存放内存地址的变量</p>
</blockquote>
<p>即：指针就是地址，口语中说的指针通常指的是指针变量</p>
<blockquote>
<p><strong>指针变量：存放地址</strong></p>
</blockquote>
<p>那我们就可以这样理解：</p>
<blockquote>
<p>把内存单元的编号就称为地址（指针）</p>
<p>指针其实就是地址，地址就是编号</p>
<p>指针就是内存单元的编号</p>
</blockquote>
<p><img loading="lazy" data-src="/images/c-1" alt="img" /></p>
<p>指针变量，用来存放地址的变量。（存放在指针中的值都被当成地址处理）。</p>
<p>那这里的问题是：</p>
<ul>
<li>一个小的单元到底是多大？（1 个字节）</li>
<li>如何编址？</li>
</ul>
<p>在 32 位的机器上，地址是 32 个 0 或者 1 组成二进制序列，那地址就得用 4 个字节的空间来存储，所以 一个指针变量的大小就应该是 4 个字节。</p>
<p>那如果在 64 位机器上，如果有 64 个地址线，那一个指针变量的大小是 8 个字节，才能存放一个地 址。</p>
<p>总结：</p>
<ul>
<li>
<p>指针变量是用来存放地址的，地址是唯一标示一块地址空间的。</p>
</li>
<li>
<p><strong>指针的大小在 32 位平台是 4 个字节，在 64 位平台是 8 个字节</strong></p>
</li>
</ul>
<hr />
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">char</span> <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">short</span> <span class="token operator">*</span>ps <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>pi <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">double</span> <span class="token operator">*</span>pd <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token comment">//ptr_t pt = NULL; 不采用统一的类型</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token comment">//sizeof 返回的值的类型是无符号整型</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zu\n"</span><span class="token punctuation">,</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>pc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 给 sizeof () 的返回值打印</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zu\n"</span><span class="token punctuation">,</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>ps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zu\n"</span><span class="token punctuation">,</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%zu\n"</span><span class="token punctuation">,</span> <span class="token function">sizeof</span><span class="token punctuation">(</span>pd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><code>int *pa;</code> ： <code>pa</code>  是指针， <code>pa</code>  指向的对象是  <code>int</code>  类型</p>
<h2 id="指针类型"><a class="anchor" href="#指针类型">#</a> 指针类型</h2>
<h3 id="意义一"><a class="anchor" href="#意义一">#</a> 意义一</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    // 0001 0001 0010 0010 ...
    // 第一个字节：44
    // 第二个字节：33
    // 第三个字节：22
    // 第四个字节：11
    int a = 0x11223344;
    int *pa = &amp;a;
    // 找到 a 的地址，将 a 的值改为 0
    // 第一个字节：00
    // 第二个字节：00
    // 第三个字节：00
    // 第四个字节：00u
    *pa = 0;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-2" alt="img" /></p>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0x11223344</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// int *pa = &amp;a;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// *pa = 0;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 由于 &amp;a 取出的是 a 的地址，指针变量照样存储</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">char</span> <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span> <span class="token comment">// int *</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token operator">*</span>pc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p><img loading="lazy" data-src="/images/c-3" alt="img" /></p>
<p>指针类型决定了指针在被解引用操作访问几个字节</p>
<ul>
<li><code>int *</code>  类型解引用访问 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 个字节</li>
<li><code>char *</code>  类型解引用访问 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 个字节</li>
<li>......</li>
</ul>
<blockquote>
<p>相同长度的类型也不能混用</p>
</blockquote>
<h3 id="意义二"><a class="anchor" href="#意义二">#</a> 意义二</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    int a = 0x11223344;
    int *pa = &amp;a;
    char *pc = (char *)&amp;a;

    printf(&quot;pa = %p\n&quot;, pa); // 000000000061FE0C
    printf(&quot;pa + 1 = %p\n&quot;, pa + 1); // 000000000061FE10

    printf(&quot;pc = %p\n&quot;, pc); // 000000000061FE0C
    printf(&quot;pc + 1 = %p\n&quot;, pc + 1); // 000000000061FE0D
    // 十进制 100 = 十六进制 0x64

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-4" alt="img" /></p>
<p>发现  <code>pa</code>  增加了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">4</span></span></span></span> 个字节， <code>pc</code>  增加了一个字节</p>
<hr />
<p>** 结论：** 指针的类型决定了 +- 1 的操作，跳过了几个字节</p>
<blockquote>
<p>决定了<mark>指针的步长</mark></p>
</blockquote>
<p><img loading="lazy" data-src="/images/c-5" alt="img" /></p>
<h3 id="类型不能通用"><a class="anchor" href="#类型不能通用">#</a> 类型不能通用</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    int a = 0;
    int *pi = &amp;a;            // pi 解引用访问 4 个字节， pi + 1 也是跳过 4 个字节
    float *pf = (float *)&amp;a; // pf 解引用访问 4 个字节， pf + 1 也是跳过 4 个字节
    // int * 和 float * 是不是可以通用？
    //   不能！
    *pi = 100;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-6" alt="img" /></p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    int a = 0;
    int *pi = &amp;a;            // pi 解引用访问 4 个字节， pi + 1 也是跳过 4 个字节
    float *pf = (float *)&amp;a; // pf 解引用访问 4 个字节， pf + 1 也是跳过 4 个字节
    // int * 和 float * 是不是可以通用？
    //   不能！
    *pf = 100.0;//浮点数是分数，存放的方式与整数不同

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-7" alt="img" /></p>
<h2 id="野指针"><a class="anchor" href="#野指针">#</a> 野指针</h2>
<blockquote>
<p>概念： 野指针就是指针指向的位置是不可知的（随机的、不正确的、没有明确限制的）</p>
</blockquote>
<h3 id="指针为初始化"><a class="anchor" href="#指针为初始化">#</a> 指针为初始化</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    int *p; // p 没有初始化，就意味着没有明确的指向
    // 一个局部变量不初始化的化，默认是随机值: 0xcccccccc
    //  - 一个非法的地址
    *p = 10; // 非法访问内存，这里的 p 就是野指针

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h3 id="指针越界"><a class="anchor" href="#指针越界">#</a> 指针越界</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;
int main()
&#123;
    int arr[10] = &#123;0&#125;;
    int *p = arr; // arr：首元素地址, &amp;arr[0]
    for (int i = 0; i &lt;= 10; i++)
    &#123;
        // 当指针指向的范围超出数组 arr 的范围时，p 就是野指针
        *p = i;
        p++;
    &#125;
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h3 id="指针指向的空间释放"><a class="anchor" href="#指针指向的空间释放">#</a> 指针指向的空间释放</h3>
<figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>stdio<span class="token punctuation">.</span>h<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre>#include <span class="token generics"><span class="token punctuation">&lt;</span>iostream<span class="token punctuation">></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token operator">*</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment">// 由于 a 是局部变量，调用完 test () 函数后，a 会销毁</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">//   - a 的空间释放还给操作系统，不属于当前程序了</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 返回的是 a 的地址</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">return</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 此时指针变量 p 获取的是 a 释放后的地址</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">//	此时 p 属于野指针</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token comment">//a 释放后的该地址没有被覆盖</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 10</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    </pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token comment">// 原先 a 释放后的地址可能会被其他数据覆盖</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ffff"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a 释放后的该地址可能被覆盖</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 5, 6, 7 等等</span></pre></td></tr><tr><td data-num="24"></td><td><pre>	</pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>类似于，女朋友换电话了，你打她之前的电话，发现是别人</p>
</blockquote>
<h3 id="避免野指针"><a class="anchor" href="#避免野指针">#</a> 避免野指针</h3>
<ol>
<li>指针初始化</li>
<li>小心指针越界</li>
<li>指针指向空间释放及时置 NULL</li>
<li>避免返回局部变量的地址</li>
<li>指针使用之前检查有效性</li>
</ol>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int a = 10;
    int *p = &amp;a;

    // NULL -&gt; 0
    int *p2 = NULL;
    /*
    	// 写入访问权限冲突，0 地址空间不能访问
	    *p2 = 100;
    */
    if (p2 != NULL) &#123; // if (p3)
        *p2 = 100;// ok
    &#125;
    cout &lt;&lt; p2;


    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h2 id="指针运算"><a class="anchor" href="#指针运算">#</a> 指针运算</h2>
<h3 id="指针-正数访问数组"><a class="anchor" href="#指针-正数访问数组">#</a> 指针 + 正数（访问数组）</h3>
<p><code>arr[i] = *(arr + i)</code>  等价</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
#define N 5
    float arr[N];
    float *p;
    // 虽然 &amp;arr[N] 不属于我，但是可以看他
    for (p = &amp;arr[0]; p &lt; &amp;arr[N];)
    &#123;
        *p++ = 0;
        //*p = 0;
        // p++;
        cout &lt;&lt; *(p - 1) &lt;&lt; &quot; &quot;; // 0 0 0 0 0
    &#125;
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-8" alt="img" /></p>
<blockquote>
<p>注意：</p>
<p><code>*p++</code>  -&gt;  <code>*p; p++</code></p>
<p><code>(*p)++</code></p>
</blockquote>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    // -128 ~ 127
    char arr[5];
    int n = sizeof(arr) / sizeof(arr[0]);
    /*
        char *p = arr;
        //用指针访问
        for (int i = 0; i &lt; n; i++, p++) &#123;
            *p = 1;
            printf(&quot;%d &quot;, arr[i]); // 1 1 1 1 1
        &#125;
    */
    char *p = arr;
    // 用指针访问
    for (int i = 0; i &lt; n; i++)
    &#123;
        *(p + i) = 1;
        printf(&quot;%d &quot;, arr[i]); // 1 1 1 1 1
    &#125;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h3 id="指针-指针"><a class="anchor" href="#指针-指针">#</a> 指针 - 指针</h3>
<pre><code class="language-C++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10];
    printf(&quot;%d\n&quot;, &amp;arr[9] - &amp;arr[0]); // 9
    printf(&quot;%d\n&quot;, &amp;arr[0] - &amp;arr[9]); // -9

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-9" alt="img" /></p>
<p>| 指针 - 指针 |：得到的指针和指针之间<strong>元素的个数</strong></p>
<blockquote>
<p>注意：不是所有的指针都能相减</p>
<ul>
<li>指向同一块空间的 2 个指针才能相减，才有意义</li>
</ul>
</blockquote>
<hr />
<h4 id="统计字符串长度"><a class="anchor" href="#统计字符串长度">#</a> 统计字符串长度</h4>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;iostream&gt;
using namespace std;

int myStrlen(char *str);

int main()
&#123;
    int len = strlen(&quot;abcdef&quot;);
    printf(&quot;%d\n&quot;, len); // 6

    printf(&quot;%d\n&quot;, myStrlen(&quot;abcdef&quot;)); // 6

    system(&quot;pause&quot;);
    return 0;
&#125;

/*
    str
    ⬇
    a b c d e f \0

    &quot;abcdef&quot; 传入 a 的地址
    str 遇到 \0 不统计
*/
int myStrlen(char *str)
&#123;
    int c = 0;
    while (*str != '\0')
    &#123;
        c++;
        str++;
    &#125;
    return c;
&#125;
</code></pre>
<p>方式二：采用指针 - 指针</p>
<p>获取首尾地址。最后用地址相减</p>
<pre><code class="language-c++">/*
    str
    ⬇
    a b c d e f \0

    &quot;abcdef&quot; 传入 a 的地址
    str 遇到 \0 不统计
*/
int myStrlen(char *str)
&#123;
    char *start = str;
    while (*str != '\0')
    &#123;
        str++;
    &#125;
    return str - start;
&#125;
</code></pre>
<hr />
<p>指针 + 指针？地址 + 地址？无意义</p>
<h3 id="指针的关系运算"><a class="anchor" href="#指针的关系运算">#</a> 指针的关系运算</h3>
<pre><code class="language-c++">for (int *p = arr[10]; p &gt;= &amp;arr[0];)
&#123;
    *--p = 0;
    // p--;
    //*p = 0;
&#125;
</code></pre>
<p>代码简化</p>
<pre><code class="language-c++">for (int *p = arr[10]; p &gt;= &amp;arr[0]; p--)
&#123;
    *p = 0;
&#125;
</code></pre>
<p>实际在绝大部分的编译器上是可以顺利完成任务的，然而我们还是应该避免这样写，因为标准并不保证它可行。</p>
<p><strong>标准规定：</strong></p>
<blockquote>
<p>允许指向数组元素的指针与指向数组最后一个元素后面的那个内存位置的指针比较，但是不允许与指向<strong>第一个元素之前</strong>的那个内存位置的指针进行比较。</p>
</blockquote>
<p>即允许  <code>p1</code>  和  <code>p2</code>  比，但是不允许  <code>p2</code>  和  <code>p3</code>  比</p>
<p><img loading="lazy" data-src="/images/c-10" alt="img" /></p>
<h2 id="指针与数组"><a class="anchor" href="#指针与数组">#</a> 指针与数组</h2>
<p>数组：一组相同类型元素的集合</p>
<p>指针变量：是一个变量，存放的是地址</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10];
    // arr 是首元素的地址
    // &amp;arr[0]

    int *p = arr;
    // 通过指针访问数组
    int n = sizeof(arr) / sizeof(&amp;arr[0]);
    for (int i = 0; i &lt; n; i++)
    &#123;
        printf(&quot;%p ----- %p ----- %p\n&quot;, &amp;arr[i], p + i, arr + i);
    &#125;
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p>sdtout</p>
<ul>
<li>
<pre><code>000000000061FDE0 ----- 000000000061FDE0 ----- 000000000061FDE0
000000000061FDE4 ----- 000000000061FDE4 ----- 000000000061FDE4
000000000061FDE8 ----- 000000000061FDE8 ----- 000000000061FDE8
000000000061FDEC ----- 000000000061FDEC ----- 000000000061FDEC
000000000061FDF0 ----- 000000000061FDF0 ----- 000000000061FDF0
</code></pre>
</li>
</ul>
<p><img loading="lazy" data-src="/images/c-11" alt="img" /></p>
<h2 id="二级指针"><a class="anchor" href="#二级指针">#</a> 二级指针</h2>
<p><strong>一级指针</strong></p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int a = 10;
    int *pa = &amp;a; // pa 是一个「指针变量」，一级指针变量
    *pa = 20;
    printf(&quot;%d\n&quot;, a); // 20

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><strong>二级指针</strong></p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int a = 10;
    int *pa = &amp;a; // pa 是一个「指针变量」，一级指针变量

    // pa 指向 a 的地址 0x0012ff40
    // ppa 指向 pa 的地址 0x0018ff32
    int **ppa = &amp;pa; // ppa 是一个「二级指针变量」
    **ppa = 20;
    
    printf(&quot;%d\n&quot;, a); // 20

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="/images/c-12" alt="img" /></p>
<p>二级指针是<strong>用来存放一级指针变量的地址</strong></p>
<h2 id="指针数组"><a class="anchor" href="#指针数组">#</a> 指针数组</h2>
<p>存放指针的数组就是指针数组</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int a = 10;
    int b = 20;
    int c = 30;

    int arr[10];

    int *pa = &amp;a;
    int *pb = &amp;b;
    int *pc = &amp;c;

    // 多个会比较麻烦，指针数组
    int *parr[10] = &#123;&amp;a, &amp;b, &amp;c&#125;; // 每个元素都是指针。数组指针，每个对象类型为 int 类型

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int a = 10;
    int b = 20;
    int c = 30;
    // 指针数组
    int *parr[10] = &#123;&amp;a, &amp;b, &amp;c&#125;; // 每个元素都是指针。数组指针，每个对象类型为 int 类型
    int n = sizeof(parr) / sizeof(parr[0]);
    for (int i = 0; i &lt; 3; i++)
    &#123;
        printf(&quot;%d &quot;, *(parr[i]));
    &#125;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230708204850658.png" alt="image-20230708204850658" /></p>
<hr />
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230708210128604.png" alt="image-20230708210128604" /></p>
<p>指针打印二维数组</p>
<p><code>arr[i] = *(arr + i)</code>  等价</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    // int arr[3][4] = &#123;1, 2, 3, 4, 2, 3, 4, 5, 3, 4, 5, 6&#125;;
    // 1 2 3 4
    // 2 3 4 5
    // 3 4 5 6

    int arr1[4] = &#123;1, 2, 3, 4&#125;;
    int arr2[4] = &#123;2, 3, 4, 5&#125;;
    int arr3[4] = &#123;3, 4, 5, 6&#125;;

    int *parr[3] = &#123;arr1, arr2, arr3&#125;; // arr1 数组名代表数组首地址

    for (int i = 0; i &lt; 3; i++)
    &#123;
        for (int j = 0; j &lt; 4; j++)
        &#123;
            // *(p + i) --&gt; p[i]
            printf(&quot;%d &quot;, parr[i][j]);
            //printf(&quot;%d &quot;, *(parr[i] + j));
            //printf(&quot;%d &quot;, *(*(parr + i) + j));
        &#125;
        printf(&quot;\n&quot;);
    &#125;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<pre><code class="language-c++">int* arr1[10]; //整形指针的数组
char *arr2[4]; //一级字符指针的数组: char *, char *, char *
char **arr3[5];//二级字符指针的数组: char **, char **, char **
</code></pre>
<h2 id="字符指针const"><a class="anchor" href="#字符指针const">#</a> 字符指针（const）</h2>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    char ch = 'a';
    char *pc = &amp;ch;
    *pc = 'b';
    printf(&quot;%c\n&quot;, ch);


    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;

    // 赋值给 p 的是字符串的首字符的地址
    //         ↓
    //         abcdef\0
    char *p = &quot;abcdef&quot;; // 把字符串首字符 a 的地址赋值给了 p
    //char arr[] = &quot;abcdef&quot;;
    
    // %s 将地址及后面的地址所在字符全部打印出来，遇到 '\0' 截止
    //	- printf 的功能
    printf(&quot;%s\n&quot;, p); // abcdef

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<p><code>&quot;abcdef&quot;</code>  是<strong>常量字符串</strong></p>
<pre><code class="language-c++">char *p = &quot;abcdef&quot;; // 把字符串首字符 a 的地址赋值给了 p
*p = 'w'; // 报错，写入访问权限冲突
</code></pre>
<p>需要加入  <code>const</code></p>
<pre><code class="language-c++">const char *p = &quot;abcdef&quot;; // 有效的保护字符串
</code></pre>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;

    const char *p1 = &quot;abcdef&quot;;
    const char *p2 = &quot;abcdef&quot;;

    // arr 数组独立空间
    char arr1[] = &quot;abcdef&quot;;
    char arr2[] = &quot;abcdef&quot;;

    if (p1 == p2)
        printf(&quot;p1 == p2\n&quot;); // this
    else
        printf(&quot;p1 != p2\n&quot;);

    if (arr1 == arr2)
        printf(&quot;arr1 == arr2\n&quot;);
    else
        printf(&quot;arr1 != arr2\n&quot;); // this

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230710221226758.png" alt="image-20230710221226758" /></p>
<hr />
<h2 id="数组指针"><a class="anchor" href="#数组指针">#</a> 数组指针</h2>
<p>指针数组：是用来存放指针的数组</p>
<pre><code class="language-c++">int* arr1[10]; //整形指针的数组
char *arr2[4]; //一级字符指针的数组: char *, char *, char *
char **arr3[5];//二级字符指针的数组: char **, char **, char **
</code></pre>
<hr />
<pre><code class="language-c++">// p1 是指针数组, p1 先更 [] 结合, [] 的优先级高于 *
// 	[int *, int *, int *, ...]
int *p1[10]; 

// p2 是数组指针, p2 先更 * 结合，p2 可以指向一个数组, 其中每个元素是 int 类型
//	[int, int, int, ...]
int (*p2)[10]; 
</code></pre>
<hr />
<h3 id="数组名-2"><a class="anchor" href="#数组名-2">#</a> 数组名</h3>
<p>数组名确实能表示首元素地址，但是有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2</span></span></span></span> 个例外</p>
<ol>
<li><code>sizeof(数组名)</code> ，这里的数组名<strong>表示整个数组</strong>，计算的是整个数组的大小，单位是字节</li>
<li><code>&amp;数组名</code> ，这里的数组名表示整个数组，取出的是<strong>整个数组的地址</strong></li>
</ol>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10] = &#123;9, 8, 7, 6, 5, 4, 3, 2, 1, 0&#125;;
    printf(&quot;%p\n&quot;, arr);         // 00D5F940
    printf(&quot;%p\n&quot;, arr + 1);     // 00D5F944

    printf(&quot;%p\n&quot;, &amp;arr[0]);     // 00D5F940
    printf(&quot;%p\n&quot;, &amp;arr[0] + 1); // 00D5F944

    printf(&quot;%p\n&quot;, &amp;arr);        // 00D5F940
    printf(&quot;%p\n&quot;, &amp;arr + 1);    // 00D5F968

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="数组指针-2"><a class="anchor" href="#数组指针-2">#</a> 数组指针</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10] = &#123;&#125;;
    //int *p = &amp;arr; //有警告的
    
    // 整型指针用来存放整型的指针
    // 字符指针用来存放字符的指针
    // 数组指针用来存放数组的指针
    int (*p2)[10] = &amp;arr;// p2 是数组指针, p2 先更 * 结合，p2 指向数组, 其中每个元素是 int 类型
    
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p>数组指针用来存放数组的指针</p>
<ul>
<li><code>int (*p2)[10] = &amp;arr</code></li>
</ul>
<p><code>p2</code>  的类型： <code>int (*)[10]</code></p>
<blockquote>
<p>数组指针的类型。</p>
<p>这个指针指向数组，10 个元素，每个元素是  <code>int</code>  类型</p>
</blockquote>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    char *arr[5] = &#123;&#125;;
    char *(*pc)[5] = &amp;arr;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<blockquote>
<p>注意：若  <code>int (*p)[] = &amp;arr</code> ，那么默认为 0 个元素： <code>int (*p)[0]</code></p>
</blockquote>
<hr />
<h3 id="数组指针遍历数组"><a class="anchor" href="#数组指针遍历数组">#</a> 数组指针遍历数组</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10] = &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10&#125;;
    int(*p)[10] = &amp;arr; // p2 是数组指针, p2 先更 * 结合，p2 指向数组, 其中每个元素是 int 类型

    int n = sizeof(arr) / sizeof(arr[0]);
    for (int i = 0; i &lt; n; i++)
    &#123;
        // p 是指向数组，存放数组的地址
        // *p：对 p 解引用，即找到整个数组。
        //  - 相当于数组名 arr，数组名又是数组首元素的地址
        //  - 就是：*p == arr
        //  - *p 本质上是数组首元素的地址

        // *(*p + i)：获取每个元素的地址，然后解引用
        printf(&quot;%d &quot;, *(*p + i));
    &#125;

    printf(&quot;%d\n&quot;, *p == arr); // 1

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<p>上面的写法别扭，最好用其余常用的方法。</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int main()
&#123;
    int arr[10] = &#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 10&#125;;
    int *p = arr;
    int n = sizeof(arr) / sizeof(arr[0]);
    for (int i = 0; i &lt; n; i++)
    &#123;
        printf(&quot;%d &quot;, *p + i);
    &#125;


    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="数组指针的常见用法二维数组"><a class="anchor" href="#数组指针的常见用法二维数组">#</a> 数组指针的常见用法（二维数组）</h3>
<pre><code class="language-c++">/*
    数组名 arr 首元素地址
    二维数组的首元素是第一行的地址：一维数组的地址
    p 数组指针，存放数组的地址
    *p：对 p 解引用，即找到整个数组。
    - 相当于数组名 arr，数组名又是数组首元素的地址
    - 就是：*p == arr
    - *p 本质上是数组首元素的地址
    访问每一行 p + 1
*/
void print2(int (*p)[5], int r, int c)
&#123;
    for (int i = 0; i &lt; r; i++)
    &#123;
        // *(p + i) 相当于获取第 i 行的「数组名」
        printf(&quot;%d\n&quot;, sizeof(*(p + i))); // 20，这是特例
        int *p1 = *(p + i);
        printf(&quot;%d\n&quot;, sizeof(p1)); // 8（指针大小）
    &#125;
&#125;
</code></pre>
<hr />
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230711225509361.png" alt="image-20230711225509361" /></p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

void print1(int arr[3][5], int r, int c)
&#123;
    for (int i = 0; i &lt; r; i++)
    &#123;
        for (int j = 0; j &lt; c; j++)
        &#123;
            printf(&quot;%d &quot;, arr[i][j]);
        &#125;
        printf(&quot;\n&quot;);
    &#125;
&#125;

// 数组名 arr 首元素地址
// 二维数组的首元素是第一行的地址：一维数组的地址
// p 为数组指针。访问每一行 p + 1
void print2(int (*p)[5], int r, int c)
&#123;
    for (int i = 0; i &lt; r; i++)
    &#123;
        for (int j = 0; j &lt; c; j++)
        &#123;
            // *(p + i)：获取每一行的地址，相当于数组名
            // *(p + i) + j：获取 i 行第 j 列的地址
            printf(&quot;%d &quot;, *(*(p + i) + j));
        &#125;
        printf(&quot;\n&quot;);
    &#125;
&#125;

int main()
&#123;

    int arr[3][5] = &#123;1, 2, 3, 4, 5, 2, 3, 4, 5, 6, 3, 4, 5, 6, 7&#125;;
    int n = sizeof(arr) / sizeof(arr[0]);
    int m = sizeof(arr[0], arr[0][0]);
    // arr 首元素地址
    print2(arr, n, m);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><code>p + 1</code>  为什么跳过一行？</p>
<ul>
<li>
<p><code>int (*p)[5];</code></p>
<p><code>p</code>  的类型： <code>int (*)[10]</code></p>
<p><code>p</code>  指向一个整型数组，5 个元素，每个元素是  <code>int</code>  类型</p>
<p><code>p + 1</code>  ：跳过一个 5 个  <code>int</code>  元素的数组</p>
</li>
</ul>
<h2 id="数组指针数组"><a class="anchor" href="#数组指针数组">#</a> 数组指针数组</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">//arr 是整型数组</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>parr1<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//parr1 是数组，每一个元素是 int * 类型，整型指针数组</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>parr2<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//parr2 是数组指针</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">/*</pre></td></tr><tr><td data-num="5"></td><td><pre>        parr3 先更 [10] 结合，是一个数组，10 个元素，其中每个元素是 int (*)[5] 类型</pre></td></tr><tr><td data-num="6"></td><td><pre>        </pre></td></tr><tr><td data-num="7"></td><td><pre>        首先移除 parr3 [10], 剩余 int (*)[5] 是数组指针类型</pre></td></tr><tr><td data-num="8"></td><td><pre>        而 parr3 [10] 又是数组，</pre></td></tr><tr><td data-num="9"></td><td><pre>        那么整体: parr3 是存放数组指针的数组</pre></td></tr><tr><td data-num="10"></td><td><pre>            - 数组 10 个元素，每个元素是数组指针</pre></td></tr><tr><td data-num="11"></td><td><pre>    */</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>parr3<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230711233632878.png" alt="image-20230711233632878" /></p>
<h2 id="数组参数-指针参数"><a class="anchor" href="#数组参数-指针参数">#</a> 数组参数、指针参数</h2>
<h3 id="一维数组传参"><a class="anchor" href="#一维数组传参">#</a> 一维数组传参</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 二级指针是指向一级指针的地址</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>arr2<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    <span class="token function">test2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="二维数组传参"><a class="anchor" href="#二维数组传参">#</a> 二维数组传参</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//err</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">// 总结：二维数组传参，函数形参的设计只能省略第一个 [] 的数字。</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">// 因为对一个二维数组，可以不知道有多少行，但是必须知道一行多少元素。</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 这样才方便运算。</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">//arr 是指针，指向的是 int 类型</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//err：一维数组的地址不能放入 int 类型</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//err：arr 先更 [5] 结合，是数组，每个元素是 int * 类型</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token comment">//p2 是数组指针，p2 先更 * 结合，p2 指向数组，其中每个元素是 int 类型</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//ok</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 二级指针是指向一级指针的地址</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//err</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">0</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token comment">// 二维数组的数组名，表示首元素的地址，其实是第一行的地址</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token comment">//	- 第一行是一个一维数组</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="一级指针传参"><a class="anchor" href="#一级指针传参">#</a> 一级指针传参</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p<span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> arr<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">/</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 一级指针 p，传给函数</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">print</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<p>反过来思考：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">//test1 函数能接收什么参数？</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">/*</pre></td></tr><tr><td data-num="5"></td><td><pre>	int a = 10;</pre></td></tr><tr><td data-num="6"></td><td><pre>	int *ptr = &amp;a;</pre></td></tr><tr><td data-num="7"></td><td><pre>	test1(&amp;a);</pre></td></tr><tr><td data-num="8"></td><td><pre>	test1(ptr);</pre></td></tr><tr><td data-num="9"></td><td><pre>	</pre></td></tr><tr><td data-num="10"></td><td><pre>	int arr[10];</pre></td></tr><tr><td data-num="11"></td><td><pre>	test1(arr);</pre></td></tr><tr><td data-num="12"></td><td><pre>*/</span></pre></td></tr></table></figure><h3 id="二级指针传参"><a class="anchor" href="#二级指针传参">#</a> 二级指针传参</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> ptr<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"num = %d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>ptr<span class="token punctuation">)</span><span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>n<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>pp <span class="token operator">=</span> <span class="token operator">&amp;</span>p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<p>反过来思考：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 二级指针存放的是一级指针的地址</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token operator">*</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    </pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>p2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    </pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token comment">// 指针数组</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="函数指针"><a class="anchor" href="#函数指针">#</a> 函数指针</h2>
<h3 id="概念"><a class="anchor" href="#概念">#</a> 概念</h3>
<p>数组指针：指向<strong>数组</strong>的指针就是数组指针</p>
<p>函数指针：指向<strong>函数</strong>的指针就是函数指针</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int add(int x, int y)
&#123;
    return x + y;
&#125;
int main()
&#123;
    int arr[5] = &#123;&#125;;
    //&amp;arr - 取出的数组的地址
    int (*p)[5] = &amp;arr; // 数组指针

    //&amp;函数名 - 取出的就是函数的地址呢？
    printf(&quot;%p\n&quot;, &amp;add); // 0000000000401550
    printf(&quot;%p\n&quot;, add);  // 0000000000401550
    //对于函数来说，&amp;函数名和函数名都是函数的地址，没有什么特殊的

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int add(int x, int y)
&#123;
    return x + y;
&#125;
int main()
&#123;
    int arr[5] = &#123;&#125;;
    //&amp;arr - 取出的数组的地址
    int(*p)[5] = &amp;arr; // 数组指针

    // pf 是指针，指向的是函数 ()，参数是 int, int，函数的返回类型是 int
    //  - 发现更数组指针写法一样
    // pf 的类型是 int (*)(int, int)
    int (*pf)(int, int) = &amp;add;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h3 id="调用函数"><a class="anchor" href="#调用函数">#</a> 调用函数</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int add(int x, int y)
&#123;
    return x + y;
&#125;
int main()
&#123;
    /*
        int a = 10;
        int *pa = &amp;a;
        *pa = 20;
        printf(&quot;%d\n&quot;, pa);
    */
    //int (*pf)(int, int) = &amp;add;
    int (*pf)(int, int) = add;
    
    // 先解引用找到函数 (*pf)，然后传参并调用函数
    int ans = (*pf)(2, 3);
    // 可以直接用，此时 * 是个摆设
    // 由于 add() 函数的地址 add 给了 pf，由于 add(2, 3) 可以，那么 pf(2, 3) 也应该可以
    // 此时 pf 与 add 等价
    int ans1 = pf(2, 3); // 5
    
    printf(&quot;%d\n&quot;, ans); // 5

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="形参传入函数地址"><a class="anchor" href="#形参传入函数地址">#</a> 形参传入函数地址</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int add(int x, int y)
&#123;
    return x + y;
&#125;

// pf 获取到函数地址
void calc(int (*pf)(int, int))
&#123;
    int a = 3;
    int b = 5;
    int ans = pf(a, b);
    printf(&quot;%d&quot;, ans); // 8
&#125;

int main()
&#123;
    // 将函数地址传入 calc 函数
    calc(add);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="二者结合"><a class="anchor" href="#二者结合">#</a> 二者结合</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

int test(const char *s)
&#123;
    return 0;
&#125;

// pf 获取到函数地址
void test2(int (*pf)(int, int))
&#123;
    int a = 3;
    int b = 5;
    int ans = pf(a, b);
    printf(&quot;%d\n&quot;, ans); // 8
&#125;

int add(int x, int y)
&#123;
    return x + y;
&#125;

int main()
&#123;
    int (*pf)(const char *) = test;

    void (*pf2)(int (*)(int, int)) = test2;

    //调用 test2 函数
    // (*pf2)(add);
    pf2(add);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="练习"><a class="anchor" href="#练习">#</a> 练习</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token punctuation">(</span> <span class="token operator">*</span><span class="token punctuation">(</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/*</pre></td></tr><tr><td data-num="3"></td><td><pre>	void (*p)();</pre></td></tr><tr><td data-num="4"></td><td><pre>		p 是函数指针</pre></td></tr><tr><td data-num="5"></td><td><pre>	t = void (*)() 是函数指针类型</pre></td></tr><tr><td data-num="6"></td><td><pre>	(t) 0 强制类型转换：0 强制转换为函数指针类型</pre></td></tr><tr><td data-num="7"></td><td><pre>	说明 0 是一个函数的地址 a</pre></td></tr><tr><td data-num="8"></td><td><pre>	*a 解引用，找到函数 f，然后 f () 调用函数</pre></td></tr><tr><td data-num="9"></td><td><pre>	-----------------------------------</pre></td></tr><tr><td data-num="10"></td><td><pre>	上述为一次函数调用，调用的是 0 作为地址处的函数。</pre></td></tr><tr><td data-num="11"></td><td><pre>	1. 把 0 强制类型转化为：无参，返回类型是 void 的函数的地址</pre></td></tr><tr><td data-num="12"></td><td><pre>	2. 调用 0 地址处的函数</pre></td></tr><tr><td data-num="13"></td><td><pre>*/</span></pre></td></tr></table></figure><hr />
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token punctuation">(</span> <span class="token operator">*</span><span class="token function">signal</span><span class="token punctuation">(</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">/*</pre></td></tr><tr><td data-num="3"></td><td><pre>	signal 先与 (...) 结合，所以是函数名</pre></td></tr><tr><td data-num="4"></td><td><pre>	signal ( int, void (*)(int) ) 是一次函数的声明</pre></td></tr><tr><td data-num="5"></td><td><pre>		- int add (int x, int y)&#123;&#125;</pre></td></tr><tr><td data-num="6"></td><td><pre>		  int add (int, int); // 函数声明</pre></td></tr><tr><td data-num="7"></td><td><pre>	剩余 void (* )(int); 为函数指针类型</pre></td></tr><tr><td data-num="8"></td><td><pre>	------------</pre></td></tr><tr><td data-num="9"></td><td><pre>	声明的 signal 函数的第一个参数的类型是 int， 第二个参数的类型是函数指针（该函数指针指向的函数参数是 int，返回类型是 void），signal 函数的 == 返回类型也是一个函数指针 ==。整体也是一次函数声明</pre></td></tr><tr><td data-num="10"></td><td><pre>*/</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    </pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token class-name">pf_t</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 把 void (*)(int) 类型重命名为 pf_t</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token comment">// 简化 void (*signal ( int, void (*)(int) ) )(int);</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token class-name">pf_t</span> <span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token class-name">pf_t</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="函数指针的用途回调函数根据不同的需求调用不同函数"><a class="anchor" href="#函数指针的用途回调函数根据不同的需求调用不同函数">#</a> 函数指针的用途（回调函数）（根据不同的需求调用不同函数）</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

// 写一个计算器
// 加法、减法、乘法、除法
void menu()
&#123;
    printf(&quot;*********************************\n&quot;);
    printf(&quot;******* 1. add    2. sub ********\n&quot;);
    printf(&quot;******* 3. mul    2. div ********\n&quot;);
    printf(&quot;******* 0. exit          ********\n&quot;);
    printf(&quot;*********************************\n&quot;);
&#125;

int add(int x, int y)
&#123;
    return x + y;
&#125;

int sub(int x, int y)
&#123;
    return x - y;
&#125;

int mul(int x, int y)
&#123;
    return x * y;
&#125;

int div1(int x, int y)
&#123;
    return x / y;
&#125;

int main()
&#123;

    int input = 1;
    int x = 0;
    int y = 0;
    int ans = 0;
    do
    &#123;
        menu();
        printf(&quot;请选择：&gt;&quot;);
        scanf(&quot;%d&quot;, &amp;input);

        switch (input)
        &#123;
        case 1:
            printf(&quot;\n请输入操作数&quot;);
            scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
            ans = add(x, y);
            printf(&quot;%d\n&quot;, ans);
            break;
        case 2:
            printf(&quot;\n请输入操作数&quot;);
            scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
            ans = sub(x, y);
            printf(&quot;%d\n&quot;, ans);
            break;
        case 3:
            printf(&quot;\n请输入操作数&quot;);
            scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
            ans = mul(x, y);
            printf(&quot;%d\n&quot;, ans);
            break;
        case 4:
            printf(&quot;\n请输入操作数&quot;);
            scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
            ans = div1(x, y);
            printf(&quot;%d\n&quot;, ans);
            break;
        case 0:
            printf(&quot;退出计算机\n&quot;);
            break;
        default:
            printf(&quot;选择错误\n&quot;);
            break;
        &#125;

    &#125; while (input);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<p>发现代码冗余，将  <code>case</code>  中函数封装</p>
<pre><code class="language-c++">...

// 回调函数
void calc(int (*pf)(int, int))
&#123;
    int x = 0;
    int y = 0;
    int ans = 0;
    printf(&quot;\n请输入操作数: &quot;);
    scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
    ans = pf(x, y);
    printf(&quot;%d\n&quot;, ans);
&#125;

int main()
&#123;

    int input = 1;
    do
    &#123;
        menu();
        printf(&quot;请选择：&gt;&quot;);
        scanf(&quot;%d&quot;, &amp;input);

        switch (input)
        &#123;
        case 1:
            // 将目的函数地址作为形参传入 calc 函数
            calc(add);
            break;
        case 2:
            calc(sub);
            break;
        case 3:
            calc(mul);
            break;
        case 4:
            calc(div1);
            break;
        case 0:
            printf(&quot;退出计算机\n&quot;);
            break;
        default:
            printf(&quot;选择错误\n&quot;);
            break;
        &#125;

    &#125; while (input);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h2 id="函数指针数组转移表"><a class="anchor" href="#函数指针数组转移表">#</a> 函数指针数组（转移表）</h2>
<p>指针数组： <code>int *arr1[5];</code>   <code>char *arr2[5];</code></p>
<p>函数指针也是指针</p>
<p>把函数和指针放在数组中，就是函数指针数组</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

...
int main()
&#123;

    // pf 是函数指针
    int (*pf)(int, int) = add;

    // arr 先更 [4] 结合，是一个数组，4 个元素，其中每个元素是函数指针类型：int (*)(int, int)
    int (*arr[4])(int, int)&#123;add, sub, mul, div1&#125;;

    for (int i = 0; i &lt; 4; i++)
    &#123;
        // (* arr[i])(4, 8);
        int ans = arr[i](8, 4);
        
        printf(&quot;%d &quot;, ans); // 12 4 32 2
    &#125;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<h3 id="函数指针数组的用途根据不同的需求调用不同函数"><a class="anchor" href="#函数指针数组的用途根据不同的需求调用不同函数">#</a> 函数指针数组的用途（根据不同的需求调用不同函数）</h3>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

// 写一个计算器
// 加法、减法、乘法、除法
void menu()
&#123;
    printf(&quot;*********************************\n&quot;);
    printf(&quot;******* 1. add    2. sub ********\n&quot;);
    printf(&quot;******* 3. mul    2. div ********\n&quot;);
    printf(&quot;******* 0. exit          ********\n&quot;);
    printf(&quot;*********************************\n&quot;);
&#125;

int add(int x, int y)
&#123;
    return x + y;
&#125;

int sub(int x, int y)
&#123;
    return x - y;
&#125;

int mul(int x, int y)
&#123;
    return x * y;
&#125;

int div1(int x, int y)
&#123;
    return x / y;
&#125;

// 回调函数
void calc(int (*pf)(int, int))
&#123;
    int x = 0;
    int y = 0;
    int ans = 0;
    printf(&quot;\n请输入操作数: &quot;);
    scanf(&quot;%d %d&quot;, &amp;x, &amp;y);
    ans = pf(x, y);
    printf(&quot;%d\n&quot;, ans);
&#125;

int main()
&#123;

    int input = 1;
    // 函数指针数组
    // 转移表
    int (*arr[])(int, int) = &#123;0, add, sub, mul, div1&#125;;
    cout &lt;&lt; arr[0];
    do
    &#123;
        menu();
        printf(&quot;请选择：&gt;&quot;);
        scanf(&quot;%d&quot;, &amp;input);
        if (input &gt;= 1 &amp;&amp; input &lt;= 4)
        &#123;
            // 函数指针，获取函数的地址
            int (*pf)(int, int) = arr[input];
            calc(pf);
        &#125;

    &#125; while (input);

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h2 id="指向函数指针数组的指针"><a class="anchor" href="#指向函数指针数组的指针">#</a> 指向函数指针数组的指针</h2>
<pre><code class="language-c++">int main()
&#123;

    int input = 1;
    // 函数指针数组
    int (*pfarr[])(int, int) = &#123;0, add, sub, mul, div1&#125;;

    // 指向「函数指针数组」的指针
    //  ppfarr 首先更 * 结合是一个指针，再更 [5] 结合，指向一个数组，5 个元素
    //      - 还剩余 int (*)(int, int)。
    //  数组中每个元素类型为函数指针类型：int (*)(int, int)
    
    int (*(*ppfarr)[5])(int, int) = &amp;pfarr;

    system(&quot;pause&quot;);
    return 0;
</code></pre>
<h2 id="回调函数void"><a class="anchor" href="#回调函数void">#</a> 回调函数（void *）</h2>
<blockquote>
<p>回调函数就是一个通过函数指针调用的函数。如果你把函数的指针（地址）作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，我们就说这是回调函数。回调函数不是由该函数的实现方直接调用，而是在特定的事件或条件发生时由另外的一方调用的，用于对该事件或条件进行响应</p>
</blockquote>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 回调函数</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">void</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n请输入操作数: "</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    ans <span class="token operator">=</span> <span class="token function">pf</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> ans<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

// size_t 类型表示C中任何对象所能达到的最大长度，它是无符号整数。
// void 指针可以指向任意类型的数据，就是说可以用任意类型的指针对 void 指针对 void 指针赋值
void qsort(void *base,                                // 你要比较的数据的起始地址
           size_t num,                                // 待排序的数据元素个数
           size_t width,                              // 待排序的数据元素的大小（单位是字节）
           int (*cmp)(const void *e1, const void *e2) // 函数指针-比较函数
);

// 比较 2 个整型元素
//  e1 指向一个整数
//  e2 指向一个整数
int cmp_int(const void *e1, const void *e2)
&#123;
    return *(int *)e1 - *(int *)e2;
&#125;

int main()
&#123;

    int arr[] = &#123;9, 8, 7, 6, 5, 4, 3, 2, 1&#125;;
    int n = sizeof(arr) / sizeof(arr[0]);
    // qsort 排序
    qsort(arr, n, sizeof(arr[0]), cmp_int);
    for (int i = 0; i &lt; n; i++)
    &#123;
        cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;;
    &#125;
    cout &lt;&lt; endl;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h1 id="结构体"><a class="anchor" href="#结构体">#</a> 结构体</h1>
<h2 id="结构体的定义"><a class="anchor" href="#结构体的定义">#</a> 结构体的定义</h2>
<p>结构是一些值的集合，这些值称为成员变量。</p>
<blockquote>
<p>结构的每个成员可以是不同类型的变量</p>
</blockquote>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 声明的结构体类型 struct Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">char</span> tel<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">char</span> gender<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> high<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><hr />
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 声明的结构体类型 struct Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">char</span> tel<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">char</span> gender<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> high<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span> p1<span class="token punctuation">,</span> p2<span class="token punctuation">;</span> <span class="token comment">//p1, p2 是使用 struct Person 结构体类型创建的 2 个变量</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">//p1, p2 是两个全局的结构体变量</span></pre></td></tr></table></figure><hr />
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

// 声明的结构体类型 struct Person
struct Person
&#123;
    char name[20];
    char tel[12];
    char gender[5];
    int high;
&#125;;

int main()
&#123;
    struct Person p1; // 结构体变量的创建

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<hr />
<p><code>struct Person p1</code> ： <code>p1</code>  是结构体变量</p>
<hr />
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 声明的结构体类型 struct Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">char</span> tel<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">char</span> gender<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> high<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Stu</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Person</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">int</span> num<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">float</span> f<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr></table></figure><h2 id="匿名结构体类型"><a class="anchor" href="#匿名结构体类型">#</a> 匿名结构体类型</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre>using namespace std<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment">// 匿名结构体类型只能使用一次</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">struct</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">char</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token keyword">float</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span> x<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment">// 匿名结构体类型只能使用一次</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">struct</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token keyword">int</span> a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token keyword">char</span> b<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">float</span> c<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span> a<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">;</span> <span class="token comment">//p 匿名结构体的指针</span></pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>	<span class="token comment">// 警告：编译器会把上面的两个声明当成完全不同的两个类型。所以是非法的。</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    p <span class="token operator">=</span> <span class="token operator">*</span>x<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="结构的自引用"><a class="anchor" href="#结构的自引用">#</a> 结构的自引用</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Node</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> data<span class="token punctuation">;</span> <span class="token comment">// 4</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Node</span> next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>上述为错误写法，因为编译器认为这是<strong>同一个类型的结构体</strong>，无线套娃下去。即节点包节点......</p>
<hr />
<p>正确写法：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Node</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> data<span class="token punctuation">;</span> <span class="token comment">// 数据域</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span>next<span class="token punctuation">;</span> <span class="token comment">// 指针域</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote>
<p>因为结构体指针大小是固定的，存放地址的。</p>
</blockquote>
<hr />
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    Node <span class="token operator">*</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span>Node<span class="token punctuation">;</span></pre></td></tr></table></figure><p>错误。匿名结构体需要结构体存在，而结构体存在又需要匿名。即：鸡生蛋问题。</p>
<hr />
<h2 id="结构体的重命名"><a class="anchor" href="#结构体的重命名">#</a> 结构体的重命名</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    Node <span class="token operator">*</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token operator">*</span> LinkList<span class="token punctuation">;</span></pre></td></tr></table></figure><p>等价于</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">int</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    Node <span class="token operator">*</span>next<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">Node</span> <span class="token operator">*</span> LinkList<span class="token punctuation">;</span> <span class="token comment">// ListList 是指针类型</span></pre></td></tr></table></figure><hr />
<h2 id="结构体的初始化"><a class="anchor" href="#结构体的初始化">#</a> 结构体的初始化</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 声明的结构体类型 struct Person</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Person</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">char</span> tel<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">char</span> gender<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token keyword">int</span> high<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token string">"张三"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token string">"15596668862"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token string">"男"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token number">172</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// 结构体变量的创建以及赋值，初始化</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    </pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<p>嵌套结构体</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
using namespace std;

// 声明的结构体类型 struct Person
struct Person
&#123;
    char name[20];
    char tel[12];
    char gender[5];
    int high;
&#125;;

struct Stu
&#123;
    struct Person p;
    int num;
    float f;
&#125;;
int main()
&#123;
    struct Person p1 = &#123;
        &quot;张三&quot;,
        &quot;15596668862&quot;,
        &quot;男&quot;,
        172&#125;; // 结构体变量的创建以及赋值，初始化

    struct Stu s = &#123;
        &#123;&quot;李四&quot;,
         &quot;15596668863&quot;,
         &quot;男&quot;,
         170&#125;,
        100,
        3.14&#125;;
    
    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230708214355838.png" alt="image-20230708214355838" /></p>
<p>发现  <code>f = 3.1400001</code> ，浮点数在内存中不能精确保存</p>
<hr />
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">struct</span> <span class="token class-name">Node</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre> <span class="token keyword">int</span> data<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre> <span class="token keyword">struct</span> <span class="token class-name">Point</span> p<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre> <span class="token keyword">struct</span> <span class="token class-name">Node</span><span class="token operator">*</span> next<span class="token punctuation">;</span> </pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span>n1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// 结构体嵌套初始化</span></pre></td></tr></table></figure><h2 id="结构体成员的访问"><a class="anchor" href="#结构体成员的访问">#</a> 结构体成员的访问</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">//...</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s,%s,%s,%d\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>tel<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s,%s,%s,%d\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>tel<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="结构体指针与结构体变量"><a class="anchor" href="#结构体指针与结构体变量">#</a> 结构体指针与结构体变量</h2>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span> <span class="token function">print2</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Person</span> <span class="token operator">*</span>p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %s %d\n"</span><span class="token punctuation">,</span> p<span class="token operator">-></span>name<span class="token punctuation">,</span> p<span class="token operator">-></span>tel<span class="token punctuation">,</span> p<span class="token operator">-></span>gender<span class="token punctuation">,</span> p<span class="token operator">-></span>high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 结构体指针 -> 成员变量</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">void</span> <span class="token function">print1</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">Person</span> p<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %s %s %d\n"</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>tel<span class="token punctuation">,</span> p<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> p<span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 结构体变量。成员变量</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Person</span> p1 <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token string">"张三"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        <span class="token string">"15596668862"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token string">"男"</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token number">172</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token comment">// 结构体变量的创建以及赋值，初始化</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token keyword">struct</span> <span class="token class-name">Stu</span> s <span class="token operator">=</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token comment">/*</pre></td></tr><tr><td data-num="21"></td><td><pre>        &#123;"李四",</pre></td></tr><tr><td data-num="22"></td><td><pre>         "15596668863",</pre></td></tr><tr><td data-num="23"></td><td><pre>         "男",</pre></td></tr><tr><td data-num="24"></td><td><pre>         */</span></pre></td></tr><tr><td data-num="25"></td><td><pre>        </pre></td></tr><tr><td data-num="26"></td><td><pre>         <span class="token number">170</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="27"></td><td><pre>        <span class="token number">100</span><span class="token punctuation">,</span></pre></td></tr><tr><td data-num="28"></td><td><pre>        <span class="token number">3.14</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s,%s,%s,%d\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>tel<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> p1<span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// 张三，15596668862, 男，172</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s,%s,%s,%d\n"</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>tel<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> s<span class="token punctuation">.</span>p<span class="token punctuation">.</span>high<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三，15596668862, 男，172</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token function">print1</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 张三，15596668862, 男，172</span></pre></td></tr><tr><td data-num="34"></td><td><pre>    <span class="token function">print2</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三，15596668862, 男，172</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>上面的  <code>print1</code>  和  <code>print2</code>  函数哪个好些？</p>
<p>答案是：首选  <code>print2</code>  函数。</p>
<blockquote>
<p>函数传参的时候，参数是需要压栈的。 如果传递一个结构体对象的时候，结构体过大，参数压栈的的系统开销比较大，所以会导致性能的下降。</p>
</blockquote>
<p><strong>结论</strong>： 结构体传参的时候，要传结构体的地址。</p>
<h1 id="动态内存管理"><a class="anchor" href="#动态内存管理">#</a> 动态内存管理</h1>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment">// 内存空间大小不能更改</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">// 4 个字节</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 40 个字节</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">"pause"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h2 id="malloc-和-free"><a class="anchor" href="#malloc-和-free">#</a> malloc 和 free</h2>
<p>C 语言提供了一个动态内存开辟的函数：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">malloc</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这个函数向内存申请一块<strong>连续可用</strong>的空间，并返回指向这块空间的指针。</p>
<ul>
<li>
<p>如果开辟成功，则返回一个指向开辟好空间的指针。</p>
</li>
<li>
<p>如果开辟失败，则返回一个  <code>NULL</code>  指针，因此  <code>malloc</code>  的返回值一定要做检查。</p>
</li>
<li>
<p>返回值的类型是  <code>void*</code>  ，所以 malloc 函数并不知道开辟空间的类型，具体在使用的时候使用者自己 来决定。</p>
</li>
<li>
<p>如果参数  <code>size</code>  为 0， <code>malloc</code>  的行为是标准是未定义的，取决于编译器。</p>
</li>
</ul>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;errno.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h></span> <span class="token comment">//malloc 函数的头文件</span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 动态内存开辟</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> <span class="token function">strerror</span><span class="token punctuation">(</span>errno<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token comment">// 使用内存</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 1 2 3 4 5 6 7 8 9</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>    </pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token comment">// 由于 malloc... 申请的空间在堆区，那么需要自己释放空间</span></pre></td></tr><tr><td data-num="23"></td><td><pre>    <span class="token comment">// 没有 free 并不是说内存空间就不会回收了，当程序推出的时候，系统会自动回收内存空间</span></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span> <span class="token comment">//f p 是野指针。</span></pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><hr />
<p>free 函数用来释放动态开辟的内存。</p>
<ul>
<li>
<p>如果参数  <code>ptr</code>  指向的空间不是动态开辟的，那 free 函数的行为是未定义的。</p>
</li>
<li>
<p>如果参数  <code>ptr</code>  是 NULL 指针，则函数什么事都不做。</p>
</li>
</ul>
<hr />
<h2 id="calloc"><a class="anchor" href="#calloc">#</a> calloc</h2>
<p>函数的功能是为  <code>num</code>  个大小为  <code>size</code>  的元素开辟一块空间，并且把空间的每个字节初始化为 0。</p>
<p>与函数  <code>malloc</code>  的区别只在于  <code>calloc</code>  会在返回地址之前把申请的空间的每个字节初始化为全 0。</p>
<pre><code class="language-c++">#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt; // malloc 函数的头文件

// 开辟 10 个整型的空间
int main()
&#123;
    int *p = (int *)calloc(10, sizeof(int));
    if (p == NULL)
    &#123;
        printf(&quot;%s\n&quot;, strerror(errno));
    &#125;
    // 打印
    for (int i = 0; i &lt; 10; i++)
    &#123;
        printf(&quot;%d &quot;, *(p + i));
    &#125;
    // 释放
    free(p);
    p = NULL;

    system(&quot;pause&quot;);
    return 0;
&#125;
</code></pre>
<h2 id="realloc"><a class="anchor" href="#realloc">#</a> realloc</h2>
<ul>
<li>
<p><code>realloc</code>  函数的出现让动态内存管理更加灵活。</p>
</li>
<li>
<p>有时会我们发现过去申请的空间太小了，有时候我们又会觉得申请的空间过大了，那为了合理的时候内存，我们一定会对内存的大小做灵活的调整。那  <code>realloc</code>  函数就可以做到对动态开辟内存大小 的调整。</p>
</li>
</ul>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">void</span><span class="token operator">*</span> <span class="token function">realloc</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span>  ptr<span class="token punctuation">,</span> <span class="token class-name">size_t</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><ul>
<li>
<p><code>ptr</code>  是要调整的内存地址</p>
</li>
<li>
<p><code>size</code>  调整之后新大小</p>
</li>
<li>
<p>返回值为调整之后的内存起始位置。</p>
</li>
<li>
<p>这个函数调整原内存空间大小的基础上，还会将原来内存中的数据移动到 新 的空间。</p>
</li>
<li>
<p><code>realloc</code>  在调整内存空间的是存在两种情况：</p>
<ul>
<li>
<p>情况 1：原有空间之后有足够大的空间</p>
</li>
<li>
<p>情况 2：原有空间之后没有足够大的空间</p>
</li>
</ul>
</li>
</ul>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230713210653883.png" alt="image-20230713210653883" /></p>
<p><strong>情况一</strong></p>
<p>当是情况 1 的时候，要扩展内存就直接原有内存之后直接追加空间，原来空间的数据不发生变化</p>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230713210627230.png" alt="image-20230713210627230" /></p>
<p><strong>情况二</strong></p>
<p>当是情况 2 的时候，原有空间之后没有足够多的空间时，扩展的方法是：在堆空间上另找一个合适大小 的连续空间来使用。这样函数返回的是一个新的内存地址。</p>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230713210642324.png" alt="image-20230713210642324" /></p>
<p>由于上述的两种情况， <code>realloc</code>  函数的使用就要注意一些。</p>
<h2 id="常见错误"><a class="anchor" href="#常见错误">#</a> 常见错误</h2>
<h3 id="1对null指针解引用"><a class="anchor" href="#1对null指针解引用">#</a> 1. 对 NULL 指针解引用</h3>
<p>代码如下（示例）：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 对 p 这个地址解引用并赋值为 0</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>malloc 等等函数在开辟空间时都是有可能开辟失败的，万一失败，就是返回空指针，你直接对空指针解引用并赋值肯定是有问题的</p>
<p>所以我们这里还是要进行指针检验<br />
代码如下（示例）：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token operator">==</span><span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token comment">// 如果返回，开辟失败结束程序，如果没有返回则可进行下面的操作</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">// 对 p 这个地址解引用并赋值为 0</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><h3 id="2对动态开辟空间的越界访问"><a class="anchor" href="#2对动态开辟空间的越界访问">#</a> 2. 对动态开辟空间的越界访问</h3>
<p>代码如下（示例）：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//200 个字节也就是 50 个 int 型</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">60</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>		<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这个代码乍一看上去没有问题，但是仔细看的话就会发现端倪，malloc 开辟 200 字节空间也就是 50 个 int 型，你 for 循环赋值最多循环次数也只能是 50 次啊，你循环 60 次肯定是越界访问了，这里也是妥妥的会报错。</p>
<h3 id="3对非动态开辟使用free函数"><a class="anchor" href="#3对非动态开辟使用free函数">#</a> 3. 对非动态开辟使用 free 函数</h3>
<p>代码如下（示例）：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>我们这里 int 创建了 a，然后把 a 的地址赋给了 int * 类型的 p，再然后 free 掉 p。这种操作也是铁定会报错的，p 这个局部变量是在栈上的，而 free 函数针对的是堆区</p>
<p>4. 使用 free 释放一块动态内存开辟内存的一部分<br />
代码如下（示例）：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 使用 free 释放一块动态内存开辟内存的一部分</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token comment">// 使用</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>		<span class="token operator">*</span>p<span class="token operator">++</span> <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>	<span class="token comment">// 释放</span></pre></td></tr><tr><td data-num="18"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>这里的代码有什么问题呢？我们画一个图就一目了然了</p>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5C5bd41aaa0ac7449d85d4432fd1543b1e.png#pic_center" alt="在这里插入图片描述" /></p>
<p>一开始 p 在上图位置，然而随着 for 循环，p++ 这个操作，p 指向的位置不断往后，一直到下图位置</p>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5C843fa8b65b0d4f7baa12a069ad41be37.png#pic_center" alt="在这里插入图片描述" /></p>
<p>这时 p 已经不指向原先开辟空间的位置了，你这时候去用 free 释放掉显然是不合适的</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">5.</span>对同一块空间多次释放</pre></td></tr><tr><td data-num="2"></td><td><pre>我们先来看<span class="token number">2</span>段代码：</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>两段代码都是对同一块空间多次释放，但第一段代码会报错，第二段不会。<br />
解释如下：<br />
第一段代码你已经释放掉 p 所指向的空间了，空间里什么也没有了，但 p 仍然指向那块空间，所以你再次释放不属于你的空间肯定会报错。<br />
第二段代码你释放掉 p 所指向空间，然后用空指针给 p 赋值，再去释放空指针，我们知道，free 空指针是什么也不做，所以不会报错。</p>
<h3 id="6动态开辟内存忘记释放"><a class="anchor" href="#6动态开辟内存忘记释放">#</a> 6. 动态开辟内存忘记释放</h3>
<p>对于动态开辟内存忘记释放，在堆区上申请的空间有 2 种回收方式：<br />
1. 你自己 free 掉<br />
 2. 程序退出时，系统自动回收<br />
我们先来看一段代码</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h></span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h></span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token keyword">int</span><span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token constant">NULL</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>	<span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><p>该代码我们没有自己使用 free 来释放内存，而中间又有 getchar 一直在等待接收字符，打个比方：假如你中途去上厕所或者干其他事情了，getchar 一直没有接收到字符，程序就一直没有结束，那我们用 p 开辟的空间在你上厕所期间就一直被占用，那块空间系统没办法去做别的有意义的事情。而上升到将来公司层面：我们写的程序可能一天 24h 都在跑，那遇到这种情况，你没有 free 掉内存，你不用又不回收，整体效率的影响是非常大的。</p>
<h2 id="cc-的内存开辟"><a class="anchor" href="#cc-的内存开辟">#</a> c/c++ 的内存开辟</h2>
<p><img loading="lazy" data-src="C:%5CUsers%5CMrs.Wang%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images-new%5Cimage-20230713212938387.png" alt="image-20230713212938387" /></p>
<p>C/C++ 程序内存分配的几个区域：</p>
<blockquote>
<ol>
<li>栈区（stack）：在执行函数时，函数内局部变量的存储单元都可以在栈上创建，函数执行结<br />
束时这些存储单元自动被释放。栈内存分配运算内置于处理器的指令集中，效率很高，但是<br />
分配的内存容量有限。 栈区主要存放运行函数而分配的局部变量、函数参数、返回数据、返<br />
回地址等。</li>
<li>堆区（heap）：一般由程序员分配释放， 若程序员不释放，程序结束时可能由 OS 回收 。分配方式类似于链表。</li>
<li>数据段（静态区）（static）存放全局变量、静态数据。程序结束后由系统释放。</li>
<li>代码段：存放函数体（类成员函数和全局函数）的二进制代码。</li>
</ol>
</blockquote>
<p>有了这幅图，我们就可以更好的理解在《C 语言初识》中讲的 static 关键字修饰局部变量的例子了。</p>
<blockquote>
<p>实际上普通的局部变量是在栈区分配空间的，栈区的特点是在上面创建的变量出了作用域就销毁。</p>
<p>但是被 static 修饰的变量存放在数据段（静态区），数据段的特点是在上面创建的变量，直到程序结束才销毁</p>
<p>所以生命周期变长。</p>
</blockquote>
<h2 id="柔性数组"><a class="anchor" href="#柔性数组">#</a> 柔性数组</h2>
<ul>
<li>结构中的柔性数组成员前面必须至少一个其他成员。</li>
<li>sizeof 返回的这种结构大小不包括柔性数组的内存。</li>
<li>包含柔性数组成员的结构用 malloc () 函数进行内存的动态分配，并且分配的内存应该大于结构的大<br />
小，以适应柔性数组的预期大小。</li>
</ul>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">//code1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">st_type</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token keyword">int</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 柔性数组成员</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span>type_a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>type_a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4</span></pre></td></tr></table></figure><h3 id="使用"><a class="anchor" href="#使用">#</a> 使用</h3>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 代码 1</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>type_a <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>type_a<span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>type_a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">// 业务处理</span></pre></td></tr><tr><td data-num="5"></td><td><pre>p<span class="token operator">-></span>i <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    p<span class="token operator">-></span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>这样柔性数组成员 a，相当于获得了 100 个整型元素的连续空间</p>
<h3 id="优势"><a class="anchor" href="#优势">#</a> 优势</h3>
<p>上述的  <code>type_a</code>  结构也可以设计为：</p>
<figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 代码 2</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">st_type</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>        <span class="token keyword">int</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token keyword">int</span> <span class="token operator">*</span>p_a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">&#125;</span>type_a<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    type_a <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span>type_a <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>type_a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    p<span class="token operator">-></span>i <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    p<span class="token operator">-></span>p_a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>p<span class="token operator">-></span>i<span class="token operator">*</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token comment">// 业务处理</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        p<span class="token operator">-></span>p_a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token comment">// 释放空间</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token operator">-></span>p_a<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    p<span class="token operator">-></span>p_a <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>    <span class="token function">free</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>    p <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span></pre></td></tr></table></figure><p>上述  <code>代码1</code>  和  <code>代码2</code>  可以完成同样的功能，但是 方法 1 的实现有两个好处</p>
<p><strong>第一个好处是</strong>：方便内存释放</p>
<blockquote>
<p>如果我们的代码是在一个给别人用的函数中，你在里面做了二次内存分配，并把整个结构体返回给<br />
用户。用户调用 free 可以释放结构体，但是用户并不知道这个结构体内的成员也需要 free，所以你<br />
不能指望用户来发现这个事。所以，如果我们把结构体的内存以及其成员要的内存一次性分配好<br />
了，并返回给用户一个结构体指针，用户做一次 free 就可以把所有的内存也给释放掉。</p>
</blockquote>
<p><strong>第二个好处是</strong>：这样有利于访问速度.</p>
<blockquote>
<p>连续的内存有益于提高访问速度，也有益于减少内存碎片。（其实，我个人觉得也没多高了，反正<br />
你跑不了要用做偏移量的加法来寻址）</p>
</blockquote>
</div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i></span><span class="text">更新于</span><time title="修改时间：2024-07-26 19:41:13" itemprop="dateModified" datetime="2024-07-26T19:41:13+08:00">2024-07-26</time></span></div><div class="reward"><button><i class="ic i-heartbeat"></i>赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img loading="lazy" data-src="/assets/wechatpay.png" alt="htired 微信支付"/><p>微信支付</p></div><div><img loading="lazy" data-src="/assets/alipay.png" alt="htired 支付宝"/><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>htired：</strong>htired<i class="ic i-at"><em>@</em></i>何必要叹气呢？</li><li class="link"><strong>本文链接：</strong><a href="https://www.htired.top/2024/07/26/algorithm/c/" title="">https://www.htired.top/2024/07/26/algorithm/c/</a></li><li class="license"><strong>版权声明：</strong>本站所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/10/05/algorithm/%E8%80%83%E7%A0%94%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="prev" itemprop="url" data-background-image="https:&#x2F;&#x2F;github.com&#x2F;htired&#x2F;MyPic&#x2F;blob&#x2F;main&#x2F;img&#x2F;a47a423f9d1c42f8895c53c72f27ff87.jpg?raw&#x3D;true" title="考研数据结构"><span class="type">上一篇</span><span class="category"><i class="ic i-flag"></i>算法</span><h3>考研数据结构</h3></a></div><div class="item right"><a href="/2024/08/13/deeplearning-pdf/" rel="next" itemprop="url" data-background-image="https:&#x2F;&#x2F;github.com&#x2F;htired&#x2F;MyPic&#x2F;blob&#x2F;main&#x2F;img&#x2F;a47a423f9d1c42f8895c53c72f27ff87.jpg?raw&#x3D;true" title="deeplearning-pdf"><span class="type">下一篇</span><h3>deeplearning-pdf</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="toc-number">1.</span> <span class="toc-text"> 字符型数据</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">2.</span> <span class="toc-text"> 数组</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">2.1.</span> <span class="toc-text"> 数组作为函数参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%90%8D"><span class="toc-number">2.2.</span> <span class="toc-text"> 数组名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%BB%84%E5%90%8D"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 一维数组的数组名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%BB%84%E5%90%8D"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 二维数组的数组名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8C%87%E9%92%88"><span class="toc-number">3.</span> <span class="toc-text"> 指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88-2"><span class="toc-number">3.1.</span> <span class="toc-text"> 指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text"> 指针类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%8F%E4%B9%89%E4%B8%80"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 意义一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%84%8F%E4%B9%89%E4%BA%8C"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 意义二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E4%B8%8D%E8%83%BD%E9%80%9A%E7%94%A8"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 类型不能通用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8E%E6%8C%87%E9%92%88"><span class="toc-number">3.3.</span> <span class="toc-text"> 野指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E4%B8%BA%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 指针为初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E8%B6%8A%E7%95%8C"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 指针越界</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E6%8C%87%E5%90%91%E7%9A%84%E7%A9%BA%E9%97%B4%E9%87%8A%E6%94%BE"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 指针指向的空间释放</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E9%87%8E%E6%8C%87%E9%92%88"><span class="toc-number">3.3.4.</span> <span class="toc-text"> 避免野指针</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E8%BF%90%E7%AE%97"><span class="toc-number">3.4.</span> <span class="toc-text"> 指针运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88-%E6%AD%A3%E6%95%B0%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84"><span class="toc-number">3.4.1.</span> <span class="toc-text"> 指针 + 正数（访问数组）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88-%E6%8C%87%E9%92%88"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 指针 - 指针</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%9F%E8%AE%A1%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6"><span class="toc-number">3.4.2.1.</span> <span class="toc-text"> 统计字符串长度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E7%9A%84%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 指针的关系运算</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E4%B8%8E%E6%95%B0%E7%BB%84"><span class="toc-number">3.5.</span> <span class="toc-text"> 指针与数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88"><span class="toc-number">3.6.</span> <span class="toc-text"> 二级指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">3.7.</span> <span class="toc-text"> 指针数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E6%8C%87%E9%92%88const"><span class="toc-number">3.8.</span> <span class="toc-text"> 字符指针（const）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88"><span class="toc-number">3.9.</span> <span class="toc-text"> 数组指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%90%8D-2"><span class="toc-number">3.9.1.</span> <span class="toc-text"> 数组名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88-2"><span class="toc-number">3.9.2.</span> <span class="toc-text"> 数组指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="toc-number">3.9.3.</span> <span class="toc-text"> 数组指针遍历数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E7%9A%84%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84"><span class="toc-number">3.9.4.</span> <span class="toc-text"> 数组指针的常见用法（二维数组）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84"><span class="toc-number">3.10.</span> <span class="toc-text"> 数组指针数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0-%E6%8C%87%E9%92%88%E5%8F%82%E6%95%B0"><span class="toc-number">3.11.</span> <span class="toc-text"> 数组参数、指针参数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E4%BC%A0%E5%8F%82"><span class="toc-number">3.11.1.</span> <span class="toc-text"> 一维数组传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E4%BC%A0%E5%8F%82"><span class="toc-number">3.11.2.</span> <span class="toc-text"> 二维数组传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E6%8C%87%E9%92%88%E4%BC%A0%E5%8F%82"><span class="toc-number">3.11.3.</span> <span class="toc-text"> 一级指针传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E4%BC%A0%E5%8F%82"><span class="toc-number">3.11.4.</span> <span class="toc-text"> 二级指针传参</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88"><span class="toc-number">3.12.</span> <span class="toc-text"> 函数指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">3.12.1.</span> <span class="toc-text"> 概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0"><span class="toc-number">3.12.2.</span> <span class="toc-text"> 调用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%A2%E5%8F%82%E4%BC%A0%E5%85%A5%E5%87%BD%E6%95%B0%E5%9C%B0%E5%9D%80"><span class="toc-number">3.12.3.</span> <span class="toc-text"> 形参传入函数地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E8%80%85%E7%BB%93%E5%90%88"><span class="toc-number">3.12.4.</span> <span class="toc-text"> 二者结合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">3.12.5.</span> <span class="toc-text"> 练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E7%9A%84%E7%94%A8%E9%80%94%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E9%9C%80%E6%B1%82%E8%B0%83%E7%94%A8%E4%B8%8D%E5%90%8C%E5%87%BD%E6%95%B0"><span class="toc-number">3.12.6.</span> <span class="toc-text"> 函数指针的用途（回调函数）（根据不同的需求调用不同函数）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E8%BD%AC%E7%A7%BB%E8%A1%A8"><span class="toc-number">3.13.</span> <span class="toc-text"> 函数指针数组（转移表）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E7%94%A8%E9%80%94%E6%A0%B9%E6%8D%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E9%9C%80%E6%B1%82%E8%B0%83%E7%94%A8%E4%B8%8D%E5%90%8C%E5%87%BD%E6%95%B0"><span class="toc-number">3.13.1.</span> <span class="toc-text"> 函数指针数组的用途（根据不同的需求调用不同函数）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E5%90%91%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%E7%9A%84%E6%8C%87%E9%92%88"><span class="toc-number">3.14.</span> <span class="toc-text"> 指向函数指针数组的指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0void"><span class="toc-number">3.15.</span> <span class="toc-text"> 回调函数（void *）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">4.</span> <span class="toc-text"> 结构体</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">4.1.</span> <span class="toc-text"> 结构体的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D%E7%BB%93%E6%9E%84%E4%BD%93%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.2.</span> <span class="toc-text"> 匿名结构体类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E7%9A%84%E8%87%AA%E5%BC%95%E7%94%A8"><span class="toc-number">4.3.</span> <span class="toc-text"> 结构的自引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-number">4.4.</span> <span class="toc-text"> 结构体的重命名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">4.5.</span> <span class="toc-text"> 结构体的初始化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%88%90%E5%91%98%E7%9A%84%E8%AE%BF%E9%97%AE"><span class="toc-number">4.6.</span> <span class="toc-text"> 结构体成员的访问</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%98%E9%87%8F"><span class="toc-number">4.7.</span> <span class="toc-text"> 结构体指针与结构体变量</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text"> 动态内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#malloc-%E5%92%8C-free"><span class="toc-number">5.1.</span> <span class="toc-text"> malloc 和 free</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#calloc"><span class="toc-number">5.2.</span> <span class="toc-text"> calloc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#realloc"><span class="toc-number">5.3.</span> <span class="toc-text"> realloc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF"><span class="toc-number">5.4.</span> <span class="toc-text"> 常见错误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E5%AF%B9null%E6%8C%87%E9%92%88%E8%A7%A3%E5%BC%95%E7%94%A8"><span class="toc-number">5.4.1.</span> <span class="toc-text"> 1. 对 NULL 指针解引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E5%AF%B9%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E7%A9%BA%E9%97%B4%E7%9A%84%E8%B6%8A%E7%95%8C%E8%AE%BF%E9%97%AE"><span class="toc-number">5.4.2.</span> <span class="toc-text"> 2. 对动态开辟空间的越界访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E5%AF%B9%E9%9D%9E%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E4%BD%BF%E7%94%A8free%E5%87%BD%E6%95%B0"><span class="toc-number">5.4.3.</span> <span class="toc-text"> 3. 对非动态开辟使用 free 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E5%8A%A8%E6%80%81%E5%BC%80%E8%BE%9F%E5%86%85%E5%AD%98%E5%BF%98%E8%AE%B0%E9%87%8A%E6%94%BE"><span class="toc-number">5.4.4.</span> <span class="toc-text"> 6. 动态开辟内存忘记释放</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cc-%E7%9A%84%E5%86%85%E5%AD%98%E5%BC%80%E8%BE%9F"><span class="toc-number">5.5.</span> <span class="toc-text"> c&#x2F;c++ 的内存开辟</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%94%E6%80%A7%E6%95%B0%E7%BB%84"><span class="toc-number">5.6.</span> <span class="toc-text"> 柔性数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">5.6.1.</span> <span class="toc-text"> 使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8A%BF"><span class="toc-number">5.6.2.</span> <span class="toc-text"> 优势</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><img class="image" loading="lazy" decoding="async" itemprop="image" alt="htired" src="/assets/avatar.jpg"/><p class="name" itemprop="name">htired</p><div class="description" itemprop="description">送君南浦，伤如之何？</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">56</span><span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">5</span><span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">40</span><span class="name">标签</span></a></div></nav><div class="social"><a target="_blank" rel="noopener" href="https://github.com/yourname" class="item github" title="https:&#x2F;&#x2F;github.com&#x2F;yourname"><i class="ic i-github"></i></a></div><div class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="#" onclick="return false;"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a href="/collect/" rel="section"><i class="ic i-shoucang"></i>收藏</a></li></div></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2024/08/13/deeplearning-pdf/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/10/05/algorithm/%E8%80%83%E7%A0%94%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/10/05/algorithm/%E8%80%83%E7%A0%94%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">考研数据结构</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/06/08/algorithm/%E6%8B%BC%E6%8E%A5%E6%9C%80%E5%A4%A7%E6%95%B0/">拼接最大数</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/06/07/algorithm/%E7%BB%9F%E8%AE%A1%E5%85%A8%E4%B8%BA-1-%E5%AD%90%E7%9F%A9%E5%BD%A2/">统计全为 1 子矩形</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/05/06/algorithm/%E6%BB%91%E5%8A%A8%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E7%BE%8E%E4%B8%BD%E5%80%BC/">滑动子数组的美丽值</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/os/" title="分类于操作系统">操作系统</a></div><span><a href="/2023/06/02/os/1%E3%80%81%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/">1、操作系统概述</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/os/" title="分类于操作系统">操作系统</a></div><span><a href="/2023/06/02/os/4%E3%80%81%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">4、文件管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/05/13/algorithm/%E5%AD%90%E4%B8%B2%E8%83%BD%E8%A1%A8%E7%A4%BA%E4%BB%8E-1-%E5%88%B0-N-%E6%95%B0%E5%AD%97%E7%9A%84%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%B8%B2/">子串能表示从 1 到 N 数字的二进制串</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/os/" title="分类于操作系统">操作系统</a></div><span><a href="/2023/06/02/os/5%E3%80%81%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/">5、设备管理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/05/06/algorithm/%E6%91%98%E6%B0%B4%E6%9E%9C/">摘水果</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/algorithm/" title="分类于算法">算法</a></div><span><a href="/2023/05/06/algorithm/%E5%B0%86%E6%95%B0%E7%BB%84%E6%B8%85%E7%A9%BA/">将数组清空</a></span></li></ul></div><div class="rpost pjax"><h2>最新评论</h2><ul class="leancloud-recent-comment" id="new-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2022 -<span itemprop="copyrightYear">2024</span><span class="with-love"><i class="ic i-sakura rotate"></i></span><span class="author" itemprop="copyrightHolder">htired @ Htired Love</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i></span><span title="站点总字数">669k 字</span><span class="post-meta-divider"> | </span><span class="post-meta-item-icon"><i class="ic i-coffee"></i></span><span title="站点阅读时长">10:08</span></div><div class="powered-by">基于 <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> & Theme.<a target="_blank" rel="noopener" href="https://github.com/theme-shoka-x/hexo-theme-shokaX/">ShokaX</a></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL = {
    ispost: true,
        path: `2024/07/26/algorithm/c/`,
        favicon: {
        show: `好久不见`,
        hide: `顺其自然`
    },
    search: {
        placeholder: "文章搜索",
        empty: "关于 「 ${query} 」，什么也没搜到",
        stats: "${time} ms 内找到 ${hits} 条结果"
    },
    copy_tex: false,
    katex: false,
    mermaid: false,
    audio: undefined,
    fancybox: true,
    nocopy: false,
    outime: true,
    template: `<div class="note warning"><p><span class="label warning">文章时效性提示</span><br>这是一篇发布于 {{publish}} 天前，最后一次更新在 {{updated}} 天前的文章，部分信息可能已经发生改变，请注意甄别。</p></div>`,
    quiz: {
        choice: `单选题`,
        multiple: `多选题`,
        true_false: `判断题`,
        essay: `问答题`,
        gap_fill: `填空题`,
        mistake: `错题备注`
    },
    ignores: [
        (uri) => uri.includes('#'),
        (uri) => new RegExp(LOCAL.path + '$').test(uri),
            []
    ]
};
</script><script src="https://s4.zstatic.net/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha384-k6YtvFUEIuEFBdrLKJ3YAUbBki333tj1CSUisai5Cswsg9wcLNaPzsTHDswp4Az8" crossorigin="anonymous" fetchpriority="high"></script><script src="https://s4.zstatic.net/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha384-ZvpUoO&#x2F;+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn&#x2F;6Z&#x2F;hRTt8+pR6L4N2" crossorigin="anonymous" fetchpriority="high"></script><script src="/js/siteInit.js?v=0.4.11" type="module" fetchpriority="high" defer></script></body></html>